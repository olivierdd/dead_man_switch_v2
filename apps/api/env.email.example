# Email Service Configuration for Secret Safe API
# Copy this file to .env and fill in your values

# =============================================================================
# EMAIL SERVICE CONFIGURATION
# =============================================================================

# Base URL for the application (used in email links)
BASE_URL=https://yoursecretissafe.com

# Default sender email address
FROM_EMAIL=noreply@yoursecretissafe.com

# =============================================================================
# SENDGRID CONFIGURATION (Recommended for most users)
# =============================================================================

# SendGrid API Key (get from https://app.sendgrid.com/settings/api_keys)
SENDGRID_API_KEY=your_sendgrid_api_key_here

# SendGrid Sender Verification (optional, but recommended)
# Verify your sender domain in SendGrid dashboard
# FROM_EMAIL should match your verified domain

# =============================================================================
# AWS SES CONFIGURATION (Alternative to SendGrid)
# =============================================================================

# AWS Access Key ID
AWS_ACCESS_KEY_ID=your_aws_access_key_id

# AWS Secret Access Key
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# AWS Region (e.g., us-east-1, eu-west-1)
AWS_REGION=us-east-1

# AWS SES Sender Verification (required)
# Verify your sender email in AWS SES console
# FROM_EMAIL should match your verified email

# =============================================================================
# EMAIL TEMPLATE CONFIGURATION
# =============================================================================

# Email verification token expiry (in hours)
EMAIL_VERIFICATION_EXPIRY_HOURS=24

# Password reset token expiry (in hours)
PASSWORD_RESET_EXPIRY_HOURS=24

# Email change verification expiry (in hours)
EMAIL_CHANGE_EXPIRY_HOURS=24

# =============================================================================
# EMAIL DELIVERY SETTINGS
# =============================================================================

# Maximum retry attempts for failed emails
EMAIL_MAX_RETRIES=3

# Delay between retry attempts (in seconds)
EMAIL_RETRY_DELAY=60

# Rate limiting for email sending (emails per minute)
EMAIL_RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test email address for email service testing
# Set this to test actual email delivery
TEST_EMAIL=your-test-email@example.com

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Enable email delivery logging
EMAIL_LOGGING_ENABLED=true

# Log level for email operations (DEBUG, INFO, WARNING, ERROR)
EMAIL_LOG_LEVEL=INFO

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# Enable email encryption (if supported by provider)
EMAIL_ENCRYPTION_ENABLED=true

# Require TLS for email connections
EMAIL_TLS_REQUIRED=true

# =============================================================================
# FALLBACK CONFIGURATION
# =============================================================================

# Enable fallback to secondary email provider
EMAIL_FALLBACK_ENABLED=true

# Fallback provider priority (sendgrid, aws_ses)
EMAIL_FALLBACK_PRIORITY=aws_ses

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# Production email settings (override development defaults)
if [ "$ENVIRONMENT" = "production" ]; then
    # Stricter rate limiting in production
    EMAIL_RATE_LIMIT_PER_MINUTE=30
    
    # Longer token expiry in production
    EMAIL_VERIFICATION_EXPIRY_HOURS=48
    PASSWORD_RESET_EXPIRY_HOURS=48
    
    # Enable all security features
    EMAIL_ENCRYPTION_ENABLED=true
    EMAIL_TLS_REQUIRED=true
fi

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================

# 1. Choose your email provider:
#    - SendGrid: Easy setup, good deliverability, free tier available
#    - AWS SES: Cost-effective, high deliverability, requires AWS account
#
# 2. For SendGrid:
#    - Sign up at https://sendgrid.com
#    - Create API key in Settings > API Keys
#    - Verify your sender domain
#    - Set SENDGRID_API_KEY
#
# 3. For AWS SES:
#    - Create AWS account
#    - Navigate to SES service
#    - Verify your sender email
#    - Create IAM user with SES permissions
#    - Set AWS credentials
#
# 4. Test your configuration:
#    - Run: python test_email_service.py
#    - Set TEST_EMAIL to verify delivery
#
# 5. Monitor email delivery:
#    - Check provider dashboards
#    - Monitor bounce and complaint rates
#    - Set up alerts for delivery failures
